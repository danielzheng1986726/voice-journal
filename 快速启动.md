# 🚀 Web 服务快速启动指南

## 最简单的方式（3步）

### 1️⃣ 设置 API Key

```bash
export AI_BUILDER_TOKEN='your_api_key_here'
```

### 2️⃣ 启动服务

```bash
./start_web.sh
```

或者直接：

```bash
python app.py
```

### 3️⃣ 打开浏览器

访问：**http://localhost:8000**

---

## 📋 详细步骤

### 步骤1：设置环境变量

**临时设置（当前终端有效）：**
```bash
export AI_BUILDER_TOKEN='your_api_key_here'
```

**永久设置（推荐）：**
```bash
# 添加到 ~/.zshrc（macOS 默认）
echo 'export AI_BUILDER_TOKEN="your_api_key_here"' >> ~/.zshrc
source ~/.zshrc

# 或添加到 ~/.bashrc（Linux）
echo 'export AI_BUILDER_TOKEN="your_api_key_here"' >> ~/.bashrc
source ~/.bashrc
```

### 步骤2：启动 Web 服务

**方法1：使用启动脚本（最简单）**
```bash
chmod +x start_web.sh
./start_web.sh
```

**方法2：直接运行 Python**
```bash
python app.py
```

**方法3：使用 uvicorn（生产环境推荐）**
```bash
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

### 步骤3：访问 Web 界面

打开浏览器，访问以下地址：

- **聊天界面**: http://localhost:8000
- **API 文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/health

---

## ✅ 启动前检查清单

- [ ] 已设置 `AI_BUILDER_TOKEN` 环境变量
- [ ] 已安装依赖：`pip install -r requirements.txt`
- [ ] 索引文件存在：`my_history.index` 和 `chunks_metadata.json`
- [ ] 端口 8000 未被占用

---

## 🎯 使用示例

启动服务后，在浏览器中：

1. 输入问题，例如：
   - "2024年6月2日我在做什么让我感到开心？"
   - "去年我去过哪里？"
   - "我给「内心的小孩」起的名字叫什么？"

2. 点击"发送"或按 Enter

3. AI 会自动检索记忆库并回答

---

## 🔧 常见问题

### Q: 提示 "AI_BUILDER_TOKEN 未设置"

**A:** 运行以下命令设置：
```bash
export AI_BUILDER_TOKEN='your_api_key_here'
```

### Q: 提示 "索引文件不存在"

**A:** 先运行索引生成：
```bash
python indexer.py
```

### Q: 端口 8000 被占用

**A:** 使用其他端口：
```bash
export PORT=8001
python app.py
```

### Q: 依赖未安装

**A:** 安装依赖：
```bash
pip install -r requirements.txt
```

---

## 🛑 停止服务

在运行服务的终端中按 `Ctrl + C`

---

## 📊 查看服务状态

访问 http://localhost:8000/health 查看健康状态

访问 http://localhost:8000/stats 查看统计信息

---

## 💡 提示

- **首次使用**：确保已运行 `python indexer.py` 生成索引
- **对话历史**：Web 界面的对话会自动保存到浏览器本地
- **多轮对话**：AI 能理解上下文，支持连续提问
- **清空对话**：点击"清空"按钮可以开始新对话

---

## 🎨 Web 界面功能

- ✅ 美观的聊天界面
- ✅ 对话历史自动保存
- ✅ 支持多轮对话和上下文理解
- ✅ 实时响应状态显示
- ✅ 响应式设计（支持移动端）
